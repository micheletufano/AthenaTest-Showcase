ExtendedBufferedReader extends BufferedReader { @Override public int read() throws IOException { int current = super.read(); if (current == '\r' || (current == '\n' && lastChar != '\r')) { lineCounter++; } lastChar = current; return lastChar; } ExtendedBufferedReader(Reader r); @Override int read(); @Override int read(char[] buf, int offset, int length); @Override String readLine(); }
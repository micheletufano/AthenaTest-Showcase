ExtendedBufferedReader extends BufferedReader { @Override public String readLine() throws IOException { String line = super.readLine(); if (line != null) { if (line.length() > 0) { lastChar = line.charAt(line.length() - 1); } lineCounter++; } else { lastChar = END_OF_STREAM; } return line; } ExtendedBufferedReader(Reader r); @Override int read(); @Override int read(char[] buf, int offset, int length); @Override String readLine(); }